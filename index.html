<!DOCTYPE html>
<html>
  <head>
    <title>pmfErcFrame</title>
    <style>
      .wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 100px;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div id="pmfErcFrame" style="width: 100%">
        <div>
          <label>
            Referral id: (on Tab click)
            <input type="text" id="temp-input" />
          </label>
        </div>
        <script>
          let script = document.createElement('script');
          script.src = `http://localhost:4000/api/erc-iframe?referralId=${window.location.hash?.slice(1)}`;
          document.body.append(script); // TODO: for testing only. After testing, we will return as it was before <script src="http://localhost:4000/api/erc-iframe?referralId=dmitry"><script>
        </script>
        <script>
          const input = document.getElementById('temp-input');
          const inputSubmitHandler = function (event) {
            window.location.hash = event.target.value;
            window.location.reload();
          };
          input.addEventListener('blur', inputSubmitHandler);
          window.addEventListener('beforeunload', (ev) => {
            ev.preventDefault();
           input.removeEventListener('blur', inputSubmitHandler)
          });
        </script>
      </div>
    </div>
  </body>
</html>

